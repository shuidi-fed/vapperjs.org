(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{313:function(e,a,t){"use strict";t.r(a);var s=t(38),v=Object(s.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"configer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configer","aria-hidden":"true"}},[e._v("#")]),e._v(" Configer")]),e._v(" "),t("p",[t("code",[e._v("Configer")]),e._v(" 为 "),t("code",[e._v("Vapper")]),e._v(" 提供了 "),t("code",[e._v("Webpack")]),e._v(" 配置，在简介中我们介绍了 "),t("router-link",{attrs:{to:"/zh/introduction.html#只负责必要的-webpack-配置"}},[e._v("Vapper 只负责必要的 Webpack 配置")]),e._v("，这使得 "),t("code",[e._v("Vapper")]),e._v(" 是一个 "),t("code",[e._v("Webpack")]),e._v(" 配置“无关”的框架。")],1),e._v(" "),t("h2",{attrs:{id:"vapper-configer-vue-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vapper-configer-vue-cli","aria-hidden":"true"}},[e._v("#")]),e._v(" @vapper/configer-vue-cli")]),e._v(" "),t("p",[e._v("这是 "),t("code",[e._v("Vapper")]),e._v(" 默认的 "),t("code",[e._v("Configer")]),e._v("，它会读取当前项目下安装的 "),t("code",[e._v("@vue/cli-service")]),e._v(" 并使用它解析出相应的 "),t("code",[e._v("Webpack")]),e._v(" 配置。因此 "),t("code",[e._v("Vapper")]),e._v(" 可以与 "),t("code",[e._v("Vue CLI")]),e._v(" 一同使用，这么做的好处是双向的："),t("code",[e._v("Vapper")]),e._v(" 拥有了全部 "),t("code",[e._v("Vue CLI")]),e._v(" 的能力，同时 "),t("code",[e._v("Vapper")]),e._v(" 为 "),t("code",[e._v("Vue CLI")]),e._v(" 提供了服务端渲染的能力。")]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),t("p",[e._v("由于这是 "),t("code",[e._v("vapper")]),e._v(" 默认的 "),t("code",[e._v("Configer")]),e._v("，因此通常你不需要手动安装它")])]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("yarn add @vapper/configer-vue-cli -D\n")])])]),t("h2",{attrs:{id:"vapper-configer-poi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vapper-configer-poi","aria-hidden":"true"}},[e._v("#")]),e._v(" @vapper/configer-poi")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://poi.js.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Poi"),t("OutboundLink")],1),e._v(" 也是一个优秀的 "),t("code",[e._v("Webpack")]),e._v(" 管理工具，如果你的项目使用 "),t("code",[e._v("Poi")]),e._v("，将很容易接入 "),t("code",[e._v("Vapper")]),e._v("，可以查看："),t("router-link",{attrs:{to:"/zh/usage.html#集成到-poi-项目"}},[e._v("Usage - 集成到 Poi 项目")]),e._v(" 以了解详情。")],1),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("yarn add @vapper/configer-poi -D\n")])])]),t("h2",{attrs:{id:"编写-configer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写-configer","aria-hidden":"true"}},[e._v("#")]),e._v(" 编写 Configer")]),e._v(" "),t("p",[e._v("正如官方文档介绍的那样："),t("a",{attrs:{href:"https://ssr.vuejs.org/guide/structure.html#introducing-a-build-step",target:"_blank",rel:"noopener noreferrer"}},[e._v("Introducing a Build Step"),t("OutboundLink")],1),e._v("，我们需要两份 "),t("code",[e._v("Webpack")]),e._v(" 配置，一份用来构建用于服务端的包，另一份用来构建用于客户端的包，因此一个 "),t("code",[e._v("Configer")]),e._v(" 本质上就是一个类，一个包含 "),t("code",[e._v("getServerConfig")]),e._v(" 方法和 "),t("code",[e._v("getClientConfig")]),e._v(" 方法的类：")]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),t("span",{attrs:{class:"token class-name"}},[e._v("MyOwnConfiger")]),e._v(" "),t("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),t("span",{attrs:{class:"token function"}},[e._v("getServerConfig")]),e._v(" "),t("span",{attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),t("span",{attrs:{class:"token punctuation"}},[e._v("{")]),t("span",{attrs:{class:"token operator"}},[e._v("...")]),t("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("  "),t("span",{attrs:{class:"token comment"}},[e._v("// 返回 server 配置")]),e._v("\n  "),t("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n  "),t("span",{attrs:{class:"token function"}},[e._v("getClientConfig")]),e._v(" "),t("span",{attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),t("span",{attrs:{class:"token punctuation"}},[e._v("{")]),t("span",{attrs:{class:"token operator"}},[e._v("...")]),t("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("  "),t("span",{attrs:{class:"token comment"}},[e._v("// 返回 client 配置")]),e._v("\n  "),t("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("这个类会在内部被 "),t("code",[e._v("Vapper")]),e._v(" 实例化并调用这两个方法。只要这两个方法返回了正确的 "),t("code",[e._v("Webpack")]),e._v(" 配置对象，"),t("code",[e._v("Vapper")]),e._v(" 就可以正确的使用它对项目进行构建。也就是说你完全可以实现自己的 "),t("code",[e._v("Configer")]),e._v("，它不依赖于任何 "),t("code",[e._v("Webpack")]),e._v(" 管理工具(如："),t("code",[e._v("Vue CLI")]),e._v(" 或 "),t("code",[e._v("Poi")]),e._v(")。")]),e._v(" "),t("p",[t("code",[e._v("Vapper")]),e._v(" 会检查项目的 "),t("code",[e._v("package.json")]),e._v(" 文件并自动加载第一个查找到的 "),t("code",[e._v("Configer")]),e._v("，因此为了让 "),t("code",[e._v("Vapper")]),e._v(" 能够识别出一个包是 "),t("code",[e._v("Configer")]),e._v("，就需要规定包的名称，如下是合法的命名约定：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("@vapper/configer-xxxx")]),e._v("：官方 "),t("code",[e._v("Configer")])]),e._v(" "),t("li",[t("code",[e._v("vapper-configer-xxxx")]),e._v("：社区 "),t("code",[e._v("Configer")])]),e._v(" "),t("li",[t("code",[e._v("@scope/vapper-configer-xxxx")]),e._v("：社区 "),t("code",[e._v("Configer")])])])])},[],!1,null,null,null);a.default=v.exports}}]);